## 分类模块

![image-20230227180930073](https://cdn.jsdelivr.net/gh/zengzjie/picgo-image@main/static_files/202302271809166.png)

布局分析：

```vue
<template>
  <view class="viewport">
    <!-- 搜索框 -->
    <view class="search">
      <view class="input">
        <text class="icon-search">篮球</text>
      </view>
    </view>
    <!-- 分类 -->
    <view class="categories">
      <!-- 主分类（一级类目） -->
      <scroll-view scroll-y enhanced class="primary" :show-scrollbar="false">
        <view
          v-for="(item, index) in categoryTopList"
          :key="item.id"
          :class="['item', activeIndex === index ? 'active' : '']"
          @tap="activeIndex = index"
        >
          {{ item.name }}
        </view>
      </scroll-view>
      <!-- 二级类目 -->
      <scroll-view scroll-y enhanced class="secondary" :show-scrollbar="false">
        <!-- 轮播图 -->
        <XtxCarousel :list="bannerData" class="carousel" />
        <!-- 二级类目列表 -->
        <view v-for="item in categorySubList" :key="item.id" class="panel">
          <view class="title">
            {{ item.name }}
            <navigator class="more" hover-class="none" url="/pages/goods/list">全部</navigator>
          </view>
          <view class="section">
            <navigator
              v-for="good in item.goods"
              :key="good.id"
              hover-class="none"
              class="navigator"
              :url="`/pages/goods/index?id=${good.id}`"
            >
              <image :src="good.picture" class="image"></image>
              <view class="name ellipsis">{{ good.name }}</view>
              <view class="price">
                <text class="symbol">¥</text>
                <text class="number">{{ good.price }}</text>
              </view>
            </navigator>
          </view>
        </view>
      </scroll-view>
    </view>
  </view>
</template>
```

广告位：复用了 `/src/components/XtxGuess.vue` 组件

一级类目：通过 `getCategoryList` 接口获取

二级类目：通过当前点击激活的 ``activeIndex` 来获取其 `children` 

接口调用：

接口地址：/category/top

请求方式：GET

登录权限: 否

请求参数：无

成功响应结果：

| 字段名称 | 数据类型 | 备注         |
| -------- | -------- | ------------ |
| id       | String   | ID           |
| name     | String   | 一级类目名称 |

```tsx
/**
 * 一级分类列表
 */
export const getCategoryList = () => {
  return http<CategoryTopItem[]>({
    method: 'GET',
    url: '/category/top'
  });
};
```

