<template>
  <view class="viewport">
    <!-- ä¸ªäººèµ„æ–™ -->
    <navigator v-if="isLogin" url="./profile" hover-class="none" class="profile arrow">
      <image mode="aspectFill" class="avatar" :src="profile.avatar"></image>
      <view class="meta">
        <text class="nickname">èŠ’æœğŸ¥­</text>
        <text class="level">Lv4 å°é’»å…”</text>
      </view>
    </navigator>
    <!-- æœªç™»å½•ï¼šç‚¹å‡»å¤´åƒè·³è½¬ç™»å½•é¡µ -->
    <navigator v-else url="/pages/login/index" hover-class="none">
      <image
        class="avatar"
        src="https://raw.githubusercontent.com/zengzjie/picgo-image/main/static_files/IMG_6247.JPG"
      ></image>
    </navigator>
    <!-- å·²ç™»é™†çš„ç”¨æˆ·æ‰èƒ½ä¿®æ”¹æ”¶è·åœ°å€ -->
    <template v-if="isLogin">
      <view class="list">
        <navigator url="./address" hover-class="none" class="item arrow">
          <text class="label">æ”¶è´§åœ°å€</text>
        </navigator>
        <navigator hover-class="none" class="item arrow">æˆ‘çš„å°ºç </navigator>
        <navigator url="./interest" hover-class="none" class="item arrow">æˆ‘çš„å…´è¶£</navigator>
      </view>
      <view class="list">
        <navigator hover-class="none" class="item arrow">ä¼šå‘˜ä¸­å¿ƒ</navigator>
        <navigator url="./account" hover-class="none" class="item arrow">è´¦æˆ·ä¸å®‰å…¨</navigator>
      </view>
      <view class="list">
        <button hover-class="none" class="item arrow" open-type="feedback">é—®é¢˜åé¦ˆ</button>
        <button hover-class="none" class="item arrow" open-type="contact">è”ç³»æˆ‘ä»¬</button>
        <navigator hover-class="none" url=" " class="item arrow">å…³äºå°å…”é²œå„¿</navigator>
      </view>
    </template>
  </view>
</template>

<script lang="ts" setup>
import { useMemberStore } from '@/stores';

const { isLogin, profile } = useMemberStore();
</script>

<style lang="scss">
page {
  background-color: $gray-2-4;
}

.viewport {
  padding: 20rpx;
  .profile {
    height: 180rpx;
    padding: 30rpx;
    margin-bottom: 20rpx;
    border-radius: 10rpx;
    background-color: $gray-1;
    position: relative;
    &::after {
      right: 25rpx;
    }
    .avatar {
      width: 120rpx;
      height: 120rpx;
      border-radius: 50%;
      float: left;
    }
    .meta {
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: 100%;
      margin-left: 140rpx;
      .nickname {
        margin-bottom: 5rpx;
        font-size: 30rpx;
        color: $uni-text-color;
      }
      .level {
        font-size: 27rpx;
        color: $gray-2-6;
      }
    }
  }

  .arrow::after {
    position: absolute;
    top: 50%;
    content: '\e6c2';
    color: $gray-2-4-1;
    font-family: 'erabbit' !important;
    font-size: 32rpx;
    transform: translateY(-50%);
  }

  .list {
    padding: 0 20rpx;
    background-color: $gray-1;
    margin-bottom: 20rpx;
    border-radius: 10rpx;
    .item {
      line-height: 90rpx;
      padding-left: 10rpx;
      font-size: 30rpx;
      color: #333;
      border-top: 1rpx solid #ddd;
      position: relative;
      &:first-child {
        border: none;
      }
      &::after {
        right: 5rpx;
      }
    }

    button {
      border-radius: 0;
      text-align: left;
      background-color: $gray-1;
      &::after {
        // è®©æŒ‰é’®ç®­å¤´å®½é«˜ç­‰äºè‡ªèº«å¤§å°
        width: auto;
        height: auto;
        left: auto;
      }
    }
  }
}
</style>
